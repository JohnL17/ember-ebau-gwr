{{#if this.displayLanding}}
  <div class="uk-flex uk-flex-center uk-flex-middle uk-margin-large-top">
    <div class="uk-flex uk-flex-column uk-width-2-3">
      <h2>
        {{t "ember-gwr.landingPage.heading"}}
      </h2>

      <p>
        {{t "ember-gwr.landingPage.infoText"}}
      </p>

      <div class="uk-flex uk-flex-between">
        <div class="uk-margin-large-right">
          <LinkTo
            @query={{hash createNewProject=true}}
            class={{configured-classes "button"}}
          >
            {{t "ember-gwr.landingPage.createNewProject"}}
          </LinkTo>
        </div>
        <div>
          <LinkTo
            @route="project.link-existing"
            class={{configured-classes "button"}}
          >
            {{t "ember-gwr.landingPage.linkExistingProject"}}
          </LinkTo>
        </div>
      </div>
    </div>
  </div>
{{else}}
  <h2 class="uk-flex uk-flex-between">
    <span>
      {{#if this.hasExistingProject}}
        {{t "ember-gwr.projectForm.title" id=this.project.eprodid}}
      {{else}}
        {{t "ember-gwr.landingPage.createNewProject"}}
      {{/if}}
    </span>
    {{#if this.import}}
      <LinkTo
        @query={{hash import=false}}
        class={{configured-classes "button"}}
      >
        Import abbrechen
      </LinkTo>
    {{else}}
      <LinkTo
        @query={{hash import=true}}
        class={{configured-classes "button" "button-primary"}}
      >
        Daten vom Ebau importieren
      </LinkTo>
    {{/if}}
  </h2>

  <ProjectForm
    @isNewProject={{not this.hasExistingProject}}
    @project={{this.project}}
    @importData={{this.importData}}
    @onSubmit={{this.saveProject}}
    {{did-insert (perform this.importCalumaData)}}
    {{did-update (perform this.importCalumaData) this.import}} as |Field|
  >
    {{#unless this.createNewProject}}
      <div class="uk-flex uk-flex-wrap uk-flex-between">
        <div class="uk-width-1-4@m uk-width-1">
          <Field type="number" readonly @attr="eprodid" disabled />
        </div>
        <div class="uk-width-1-4@m uk-width-1">
          <Field
            type="number"
            readonly
            disabled
            @attr="officialConstructionProjectFileNo"
          />
        </div>
        <div class="uk-width-1-4@m uk-width-1">
          <Field
            type="number"
            readonly
            disabled
            @attr="extensionOfOfficialConstructionProjectFileNo"
          />
        </div>
      </div>
    {{/unless}}

    <Field
      @inputType="select"
      @required={{true}}
      @attr="typeOfConstructionProject"
      @options={{array "Hochbau" "Tiefbau"}}
    />

    <Field
      @inputType="select"
      @required={{true}}
      @attr="constructionLocalisation"
      @options={{array "Altdorf" "Leuzigen"}}
    />

    <Field
      @inputType="textarea"
      @required={{true}}
      minlength="3"
      maxlength="1000"
      @attr="constructionProjectDescription"
    />

    <Field
      @inputType="select"
      @required={{true}}
      @attr="typeOfPermit"
      @options={{array "Bewilligungsgrund 1" "Bewilligungsgrund 2"}}
    />

    <Field
      type="number"
      min="1000"
      max="99999999900"
      @required={{true}}
      @attr="totalCostsOfProject"
    />

    <Field type="number" @required={{true}} @attr="constructionSurveyDeptNo" />

    <Field
      @inputType="select"
      @attr="typeOfConstruction"
      @options={{array "Wasserversorgungsanlagen"}}
    />

    <h3>
      {{t "ember-gwr.projectForm.dates"}}
    </h3>
    <div
      class="uk-flex uk-flex-wrap {{
        if
        this.import
        "uk-child-width-1-1"
        "uk-child-width-1-4@l uk-child-width-1-3@m uk-child-width-1-2@s"
      }}"
    >
      {{#let (unless this.import "uk-padding-small") as |spacingClass|}}
        <div class={{spacingClass}}>
          <Field
            @inputType="date"
            @attr="projectAnnouncementDate"
            @required={{true}}
          />
        </div>
        <div class={{spacingClass}}>
          <Field @inputType="date" @attr="buildingPermitIssueDate" />
        </div>
        <div class={{spacingClass}}>
          <Field @inputType="date" @attr="projectStartDate" />
        </div>
        <div class={{spacingClass}}>
          <Field @inputType="date" @attr="projectCompletionDate" />
        </div>
        <div class={{spacingClass}}>
          <Field @inputType="date" @attr="projectSuspensionDate" />
        </div>
        <div class={{spacingClass}}>
          <Field
            @inputType="date"
            @attr="constructionAuthorisationDeniedDate"
          />
        </div>
        <div class={{spacingClass}}>
          <Field @inputType="date" @attr="nonRealisationDate" />
        </div>
        <div class={{spacingClass}}>
          <Field @inputType="date" @attr="withdrawalDate" />
        </div>
      {{/let}}
    </div>

    <h3>
      {{t "ember-gwr.projectForm.realestateIdentification.heading"}}
    </h3>
    <Field
      type="number"
      @required={{true}}
      @attr="realestateIdentification.number"
    />
    <Field type="number" @attr="realestateIdentification.egrid" />

    <h3>
      {{t "ember-gwr.projectForm.client.heading"}}
    </h3>

    <Field
      @inputType="select"
      @required={{true}}
      @attr="typeOfClient"
      @options={{array "Auftraggeber Typ 1" "Auftraggeber Typ 2"}}
    />

    <div class="uk-flex uk-margin">
      <div class="uk-width-1-2 uk-margin-small-right">
        <Field
          @attr="client.identification.personIdentification.officialName"
          @noMargin={{true}}
        />
      </div>
      <div class="uk-width-1-2">
        <Field
          @attr="client.identification.personIdentification.firstName"
          @noMargin={{true}}
        />
      </div>
    </div>

    <div class="{{unless this.import "uk-flex"}} uk-margin">
      <div class={{if this.import "uk-margin" "uk-width-5-6"}}>
        <Field @attr="client.address.street" @noMargin={{true}} />
      </div>
      <div class={{unless this.import "uk-width-1-6 uk-margin-small-left"}}>
        <Field
          type="number"
          @attr="client.address.houseNumber"
          @noMargin={{true}}
        />
      </div>
    </div>

    <div class="{{unless this.import "uk-flex"}} uk-margin">
      <div class={{if this.import "uk-margin" "uk-width-1-6"}}>
        <Field
          type="number"
          @attr="client.address.swissZipCode"
          @noMargin={{true}}
        />
      </div>
      <div class={{unless this.import "uk-width-5-6 uk-margin-small-left"}}>
        <Field @attr="client.address.town" @noMargin={{true}} />
      </div>
    </div>
    <Field @attr="client.address.country" />
  </ProjectForm>
{{/if}}
